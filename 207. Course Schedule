O(max(numCourses, len(prerequisites))) time, O(max(numCourses, len(prerequisites))) space
class Solution(object):
    def canFinish(self, numCourses, prerequisites):
        """
        :type numCourses: int
        :type prerequisites: List[List[int]]
        :rtype: bool
        """
        
        adjacency = collections.defaultdict(set)
        for pre in prerequisites:
            adjacency[pre[0]].add(pre[1])
        
        visited = [0 for _ in range(numCourses)]
        
        def myDFS(c):
            if c not in adjacency: return True
            if visited[c] == 1: return True
            if visited[c] == -1: return False
            
            visited[c] = -1
            pre = adjacency[c]
            for pre_c in pre:
                if not myDFS(pre_c):
                    return False
            
            visited[c] = 1
            
            return True
        
        for c in adjacency:
            if not myDFS(c):
                return False

        return True


O(???) time, O(max(numCourses, len(prerequisites))) space
class Solution(object):
    def canFinish(self, numCourses, prerequisites):
        """
        :type numCourses: int
        :type prerequisites: List[List[int]]
        :rtype: bool
        """

        adjacency_list = collections.defaultdict(set)
        for pre in prerequisites:
            adjacency_list[pre[0]].add(pre[1])

        cur = [i for i in range(numCourses) if i not in adjacency_list]
        while cur:
            temp = []
            for c in cur:
                for course, pre_c_set in adjacency_list.iteritems():
                    if c in pre_c_set:
                        pre_c_set.remove(c)
                        if not pre_c_set:
                            temp.append(course)

            for course in temp:
                del adjacency_list[course]

            cur = temp

        return not adjacency_list
