O(n) time, O(1) space
class Solution(object):
    def removeComments(self, source):
        """
        :type source: List[str]
        :rtype: List[str]
        """
        
        if not source: return []
        
        m = len(source)
        res, cur_line = [], 0
        is_left_block_comment, right_block_ending_idx = False, 0
        left_start_idx = -2
        for i in range(m):
            n = len(source[i])
            for j in range(n+1):
                if j < n and source[i][j] == '/':
                    if is_left_block_comment:
                        if j > 0 and source[i][j-1] == '*' and j-left_start_idx > 2:
                            is_left_block_comment = False
                            right_block_ending_idx = j+1
                    else:
                        if j+1 < n:
                            if source[i][j+1] == '*':
                                sentence = source[i][right_block_ending_idx:j]
                                if sentence:
                                    if cur_line >= len(res):
                                        res.append(sentence)
                                    else:
                                        res[cur_line] += sentence
                                
                                is_left_block_comment = True
                                left_start_idx = j
                            elif source[i][j+1] == '/':
                                sentence = source[i][right_block_ending_idx:j]
                                if sentence:
                                    if cur_line >= len(res):
                                        res.append(sentence)
                                    else:
                                        res[cur_line] += sentence
                                if cur_line < len(res): cur_line += 1
                                right_block_ending_idx = 0
                                break
                elif j == n:
                    if not is_left_block_comment:
                        sentence = source[i][right_block_ending_idx:]
                        if sentence:
                            if cur_line >= len(res):
                                res.append(sentence)
                            else:
                                res[cur_line] += sentence
                        if cur_line < len(res): cur_line += 1
                        right_block_ending_idx = 0
                    left_start_idx = -2
        return res


别的解法还没有看。
