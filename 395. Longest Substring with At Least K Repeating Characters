class Solution(object):
    def longestSubstring(self, s, k):
        """
        :type s: str
        :type k: int
        :rtype: int
        """
        
        char_occurance = {}
        
        for char in s:
            if char not in char_occurance:
                char_occurance[char] = 0
            char_occurance[char] += 1
        
        my_filter = [char for char in char_occurance if char_occurance[char] < k]
        if not my_filter: return len(s)
        substrings = re.split('|'.join(my_filter), s)
        return max([self.longestSubstring(substring, k) for substring in substrings])
