O(n) time, O(1) extra space excepts the output array
class Solution(object):
    def productExceptSelf(self, nums):
        """
        :type nums: List[int]
        :rtype: List[int]
        """
        
        size = len(nums)
        output = [1 for _ in range(size)]
        
        left_product = 1
        for idx in range(size-1):
            left_product *= nums[idx]
            output[idx+1] = left_product
        
        right_product = 1
        for idx in range(size-1, 0, -1):
            right_product *= nums[idx]
            output[idx-1] *= right_product
        
        return output
